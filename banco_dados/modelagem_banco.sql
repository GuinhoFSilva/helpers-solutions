CREATE DATABASE dbPMS;
USE dbPMS;

-- TABELA PARA GUARDAR OS DADOS DOS CLIENTES 
CREATE TABLE tbCliente(
idCliente INT PRIMARY KEY auto_increment,
nome VARCHAR(50) NOT NULL,
email VARCHAR(45) NOT NULL,
cnpj VARCHAR(14) NOT NULL,
logradouro VARCHAR(60) NOT NULL,
numLogradouro VARCHAR(60) NOT NULL,
senha VARCHAR(20) NOT NULL
);

-- TABELA SOBRE OS DADOS DAS MAQUINAS ANALISADAS/MONITORADAS
CREATE TABLE tbMaquina(
idMaquina INT PRIMARY KEY AUTO_INCREMENT,
nome VARCHAR(50) NOT NULL,
tipo VARCHAR(50),
fabricante VARCHAR(78),
ambienteInstalado VARCHAR(78) NOT NULL,
maxTemperatura DECIMAL(5,2) NOT NULL,
fkCliente INT NOT NULL,
CONSTRAINT fkClienteMaquina FOREIGN KEY (fkCliente) REFERENCES tbCliente(idCliente)
);

-- TABELA PARA GUARDAR OS DADOS DOS SENSORES 
CREATE TABLE tbDadosTemperatura(
idDado INT PRIMARY KEY auto_increment,
hrColeta TIME NOT NULL,
dtColeta DATE NOT NULL,
temperatura DECIMAL(5,2) NOT NULL,
fkMaquina INT NOT NULL,
CONSTRAINT fkMaquinaDadosColetados FOREIGN KEY (fkMaquina) REFERENCES tbMaquina(idMaquina)
);

-- DADOS PARA EXEMPLIFICAR NOSSO PENSAMENTO
INSERT INTO tbCliente VALUES 
	(DEFAULT, 'PETROBAS', '33000167000101', '12345'),
    (DEFAULT, 'PETRONAS', '03613421000186', '12345'),
    (DEFAULT, 'BRASKEM', '42150391004672', '12345');
    
INSERT INTO tbMaquina VALUES
	(DEFAULT, 'Bomba Centrífuga','Mancalizada', 'Grundfos', 'Sala 2', 120.00),
    (DEFAULT, 'Bomba Centrífuga','Mancalizada', 'Thebe', 'Sala 2', 150.00),
    (DEFAULT, 'Bomba Axial', 'Monoestágio BC-23', 'Grundfos', 'Pátio 5', 250.00);
    
INSERT INTO tbDadosTemperatura VALUES 
	(DEFAULT, current_timestamp(), 100.50),
    (DEFAULT, current_timestamp(), 110.50),
    (DEFAULT, current_timestamp(), 105.00),
    (DEFAULT, current_timestamp(), 93.50),
    (DEFAULT, current_timestamp(), 100.50),
    (DEFAULT, current_timestamp(), 110.50),
    (DEFAULT, '2024-03-05 13:30:21', 102.75),
	(DEFAULT, '2024-03-05 13:45:38', 101.20),
	(DEFAULT, '2024-03-05 14:00:55', 99.90),
	(DEFAULT, '2024-03-05 14:15:12', 100.35),
	(DEFAULT, '2024-03-05 14:30:29', 103.10),
	(DEFAULT, '2024-03-05 14:45:46', 98.55),
	(DEFAULT, '2024-03-05 15:00:03', 100.25),
	(DEFAULT, '2024-03-05 15:15:20', 101.60),
	(DEFAULT, '2024-03-05 15:30:37', 99.75),
	(DEFAULT, '2024-03-05 15:45:54', 102.00),
	(DEFAULT, '2024-03-05 16:00:11', 100.80),
	(DEFAULT, '2024-03-05 16:15:28', 103.25),
	(DEFAULT, '2024-03-05 16:30:45', 98.90),
	(DEFAULT, '2024-03-05 16:45:02', 101.50),
	(DEFAULT, '2024-03-05 17:00:19', 99.30),
	(DEFAULT, '2024-03-05 17:15:36', 100.65),
	(DEFAULT, '2024-03-05 17:30:53', 102.10),
	(DEFAULT, '2024-03-05 17:45:10', 98.80),
	(DEFAULT, '2024-03-05 18:00:27', 101.35),
	(DEFAULT, '2024-03-05 18:15:44', 100.55),
	(DEFAULT, '2024-03-05 18:30:01', 103.00),
	(DEFAULT, '2024-03-05 18:45:18', 99.60),
	(DEFAULT, '2024-03-05 19:00:35', 102.20),
	(DEFAULT, '2024-03-05 19:15:52', 101.10),
	(DEFAULT, '2024-03-05 19:30:09', 100.45),
	(DEFAULT, '2024-03-05 19:45:26', 99.85),
	(DEFAULT, '2024-03-05 20:00:43', 103.15),
	(DEFAULT, '2024-03-05 20:15:00', 101.55),
	(DEFAULT, '2024-03-05 20:30:17', 98.95),
	(DEFAULT, '2024-03-05 20:45:34', 100.95),
	(DEFAULT, '2024-03-05 21:00:51', 102.05),
	(DEFAULT, '2024-03-05 21:15:08', 99.70),
	(DEFAULT, '2024-03-05 21:30:25', 100.30),
	(DEFAULT, '2024-03-05 21:45:42', 101.85),
	(DEFAULT, '2024-03-05 22:00:59', 102.30),
	(DEFAULT, '2024-03-05 22:15:16', 98.75),
	(DEFAULT, '2024-03-05 22:30:33', 100.60),
	(DEFAULT, '2024-03-05 22:45:50', 101.45),
    (DEFAULT, current_timestamp(), 105.00),
    (DEFAULT, current_timestamp(), 93.50),
    (DEFAULT, current_timestamp(), 98.50);
    

SELECT * FROM tbCliente;
SELECT * FROM tbDadosTemperatura;
SELECT * FROM tbMaquina;